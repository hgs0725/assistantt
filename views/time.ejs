<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <title>emp_time</title>
    <!--link rel="icon" href="favicon.ico" type="image/x-icon"-->
    <!--link rel="stylesheet" type="text/css" href="index.css"-->

    <script type="text/javascript">
        function clickTdEvent(tdObj) {
            if (tdObj.style.backgroundColor == 'rgb(0, 0, 0)') {
                tdObj.style.backgroundColor = '#00FF0000';
            } else {
                tdObj.style.backgroundColor = 'rgb(0, 0, 0)';
            }
        }

        function save() {
            var emp_time_array = [];
            var table = document.getElementById("tbl");
            var i;
            var j;

            for (i = 0; i < 10; i++) {
                for (j = 0; j < 6; j++) {
                    if (table.rows[i].cells[j].style.backgroundColor === 'rgb(0, 0, 0)') {
                        emp_time_array.push(table.rows[i].cells[j].id);
                    }
                }
            }

            let time_string = emp_time_array.join(',');
            var data = {'emp_time': time_string};
            data = JSON.stringify(data);

            console.log(data);

            var xhr = new XMLHttpRequest();
            xhr.open('GET', 'http://localhost:3000/save_time/'+time_string);
            xhr.setRequestHeader('Content-type', "application/x-www-form-urlencoded");
            xhr.send("emp_time=" + time_string);

            xhr.addEventListener('load', function(){
                alert(xhr.responseText);
            });


        }


    </script>
</head>
<body>

<table border="1" cellspacing="0" id="tbl">
    <th></th>
    <th>월요일</th>
    <th>화요일</th>
    <th>수요일</th>
    <th>목요일</th>
    <th>금요일</th>

    <tr height="21" id="nine" style="cursor:hand">
        <td>09:00</td>
        <td id="mon_nine" onclick="clickTdEvent(this)" width="60"></td>
        <td id="tue_nine" onclick="clickTdEvent(this)" width="60"></td>
        <td id="wednes_nine" onclick="clickTdEvent(this)" width="60"></td>
        <td id="thurs_nine" onclick="clickTdEvent(this)" width="60"></td>
        <td id="fri_nine" onclick="clickTdEvent(this)" width="60"></td>
    </tr>
    <tr height="21" id="ten" style="cursor:hand">
        <td>10:00</td>
        <td id="mon_ten" onclick="clickTdEvent(this)" width="60"></td>
        <td id="tue_ten" onclick="clickTdEvent(this)" width="60"></td>
        <td id="wednes_ten" onclick="clickTdEvent(this)" width="60"></td>
        <td id="thurs_ten" onclick="clickTdEvent(this)" width="60"></td>
        <td id="fri_ten" onclick="clickTdEvent(this)" width="60"></td>
    </tr>
    <tr height="21" id="eleven" style="cursor:hand">
        <td>11:00</td>
        <td id="mon_eleven" onclick="clickTdEvent(this)" width="60"></td>
        <td id="tue_eleven" onclick="clickTdEvent(this)" width="60"></td>
        <td id="wednes_eleven" onclick="clickTdEvent(this)" width="60"></td>
        <td id="thurs_eleven" onclick="clickTdEvent(this)" width="60"></td>
        <td id="fri_eleven" onclick="clickTdEvent(this)" width="60"></td>
    </tr>
    <tr height="21" id="twelve" style="cursor:hand">
        <td>12:00</td>
        <td id="mon_twelve" onclick="clickTdEvent(this)" width="60"></td>
        <td id="tue_twelve" onclick="clickTdEvent(this)" width="60"></td>
        <td id="wednes_twelve" onclick="clickTdEvent(this)" width="60"></td>
        <td id="thurs_twelve" onclick="clickTdEvent(this)" width="60"></td>
        <td id="fri_twelve" onclick="clickTdEvent(this)" width="60"></td>
    </tr>
    <tr height="21" id=thirteen style="cursor:hand">
        <td>13:00</td>
        <td id="mon_thirteen" onclick="clickTdEvent(this)" width="60"></td>
        <td id="tue_thirteen" onclick="clickTdEvent(this)" width="60"></td>
        <td id="wednes_thirteen" onclick="clickTdEvent(this)" width="60"></td>
        <td id="thurs_thirteen" onclick="clickTdEvent(this)" width="60"></td>
        <td id="fri_thirteen" onclick="clickTdEvent(this)" width="60"></td>
    </tr>
    <tr height="21" id=fourteen style="cursor:hand">
        <td>14:00</td>
        <td id="mon_fourteen" onclick="clickTdEvent(this)" width="60"></td>
        <td id="tue_fourteen" onclick="clickTdEvent(this)" width="60"></td>
        <td id="wednes_fourteen" onclick="clickTdEvent(this)" width="60"></td>
        <td id="thurs_fourteen" onclick="clickTdEvent(this)" width="60"></td>
        <td id="fri_fourteen" onclick="clickTdEvent(this)" width="60"></td>
    </tr>
    <tr height="21" id=fifteen style="cursor:hand">
        <td>15:00</td>
        <td id="mon_fifteen" onclick="clickTdEvent(this)" width="60"></td>
        <td id="tue_fifteen" onclick="clickTdEvent(this)" width="60"></td>
        <td id="wednes_fifteen" onclick="clickTdEvent(this)" width="60"></td>
        <td id="thurs_fifteen" onclick="clickTdEvent(this)" width="60"></td>
        <td id="fri_fifteen" onclick="clickTdEvent(this)" width="60"></td>
    </tr>
    <tr height="21" id=sixteen style="cursor:hand">
        <td>16:00</td>
        <td id="mon_sixteen" onclick="clickTdEvent(this)" width="60"></td>
        <td id="tue_sixteen" onclick="clickTdEvent(this)" width="60"></td>
        <td id="wednes_sixteen" onclick="clickTdEvent(this)" width="60"></td>
        <td id="thurs_sixteen" onclick="clickTdEvent(this)" width="60"></td>
        <td id="fri_sixteen" onclick="clickTdEvent(this)" width="60"></td>
    </tr>
    <tr height="21" id=seventeen style="cursor:hand">
        <td>17:00</td>
        <td id="mon_seventeen" onclick="clickTdEvent(this)" width="60"></td>
        <td id="tue_seventeen" onclick="clickTdEvent(this)" width="60"></td>
        <td id="wednes_seventeen" onclick="clickTdEvent(this)" width="60"></td>
        <td id="thurs_seventeen" onclick="clickTdEvent(this)" width="60"></td>
        <td id="fri_seventeen" onclick="clickTdEvent(this)" width="60"></td>
    </tr>
</table>

<button onclick="save()">저장</button>

</body>
</html>